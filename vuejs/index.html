<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meziplanetární výlet</title>
    <link rel="icon" href="./favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        #app .card:last-child {
            margin-top: 15px;
        }

        </style>
    </head>

<body>
    <div class="container pt-5" style="max-width: 600px; padding-bottom: 400px;">
        <h1 class="text-center my-3">Registration for Interplanetary Trip</h1>
        <p>
            <a href="https://vuejs.org/guide/introduction" target="_blank">VueJS docs</a> Lorem, ipsum dolor sit amet
            consectetur adipisicing elit. Facilis et harum quaerat voluptates ipsa alias voluptas odit! Quae a suscipit
            numquam. Officiis modi reprehenderit repudiandae? Consequuntur nisi at ullam molestias!
        </p>

        <div id="app">
            <div class="card p-4">
                <form>
                    <div class="mb-3">
                        <label for="name">Jméno astronauta</label>
                        <input class="form-control" type="text" id="name" v-model="trip.name" placeholder="Jan Novák">
                    </div>
                    <div class="mb-3">
                        <label for="planet">Destinace</label>
                        <select class="form-select" id="planet" v-model="trip.destination">
                            <option value="Mars">Mars</option>
                            <option value="Venuše">Venuše</option>
                            <option value="Jupiter">Jupiter</option>
                            <option value="Měsíc">Měsíc (pro začátečníky)</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="days">Počet dní (min. 1)</label>
                        <input class="form-control" type="number" id="days" v-model.number="trip.days" min="1">
                    </div>
                    
                    <div class="mb-3">
                        <input class="form-check-input" type="checkbox" id="terms" v-model="trip.accepted">
                        <label class="form-check-label" for="terms">Souhlasím s podmínkami</label>
                    </div>
                    <div class="pb-3">
                        <button class="btn btn-primary w-100" :disabled="!isValid" type="submit">Odeslat</button>
                    </div>
                    <p class="text-muted">
                        Tento formulář nikam neposílá — vše se děje v prohlížeči.
                    </p>
                </form>
            </div>

            <div class="card p-3">
                <h2>Palubní lístek</h2>
                <div v-if="isValid">
                    <p>
                        Jméno: <strong>{{ trip.name }}</strong> <br>
                        Destinace: <strong>{{ trip.destination }}</strong> <br>
                        Počet dní: <strong>{{ trip.days }}</strong> <br>
                        Odhadovaná cena: <strong>{{ estimatedPrice }} kreditů</strong> <br>
                    </p>
                </div>
                <div v-else>
                    <p class="text-danger">
                        Vyplňte prosím všechna pole a odsouhlaste podmínky pro zobrazení palubního lístku.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <script>
        const app = Vue.createApp(
            data() {
                return {
                    trip: {
                        name: "", 
                        destination: "Mars",
                        days: 1, 
                        accepted: false, 
                    }
                    errors: {}
                }
            },
            computed: {
                isValid() {
                    return this.trip.name.trim() !== '' && 
                           this.trip.destination !== '' && 
                           this.trip.days >= 1 &&
                           this.trip.accepted
                },
                methods: {
                    validate(){
                        this.errors = {}
                        if(this.trip.name.trim() === ''){
                            this.errors.name = "Jméno je povinné."
                        }
                    },
                    handleForm(){
                        this.validate()
                    }

                estimatedPrice() {
                    let basePrice = 0;

                    switch (this.trip.destination) {
                        case 'Mars':
                            basePrice = 1000;
                            break;
                        case 'Venuše':
                            basePrice = 800;
                            break;
                        case 'Jupiter':
                            basePrice = 5000; 
                            break;
                        case 'Měsíc':
                            basePrice = 300;
                            break;
                        default:
                            basePrice = 100;
                    }

                    const dailyCost = 200;
                    const totalCost = basePrice + (this.trip.days * dailyCost);
                    
                    return totalCost.toLocaleString('cs-CZ');
                }
            }
        })

        app.mount('#app')

    </script>
</body>

</html> 